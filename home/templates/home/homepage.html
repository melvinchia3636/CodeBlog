{% load static %}
{% load getdatetime %}

<!DOCTYPE html>
<html lang="en">
	<head>
		{% include 'base/head.html' %}
		<link rel="stylesheet" type="text/css" href='{% static "base/navbar.css" %}'>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
		<link rel="stylesheet" type='text/css' href='{% static "home/css/main.css" %}'>
		<script src="//code.iconify.design/1/1.0.6/iconify.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12"></script>
 	</head>
	<body>
		<div id="t"></div>
		{% include 'base/navbar.html' %}
		<div class='top-wrapper'>
			<div class='top-container'>
				<div class='subtitle top-title'>
					<p class='subtitle-text'>Hey! I'm</p>
				</div>
				<div class='title-wrapper'>
					<p class='title-text'></p>
					<div class='title-seperator'></div>
				</div>
				<div class='subtitle'>
					<p class='subtitle-text'>A 15 years old guy who can do the jobs with unimaginable speed and quality, and enjoy learning new skills as time goes by.</p>
				</div>
				<a href='/projects' class='btn-mywork'>
					<div class='bg'></div>
					<div class='text'>SEE MY WORKS</div>
				</a>
				<div class='footer-socialmedia-list-container top-socialmedia-list'>
					<ul>
						<li><span data-feather='github' class='footer-socialmedia-icon'></span></li>
						<li><span data-feather='youtube' class='footer-socialmedia-icon'></span></li>
						<li><span data-feather='facebook' class='footer-socialmedia-icon'></span></li>
						<li><span data-feather='linkedin' class='footer-socialmedia-icon'></span></li>
						<li><span data-feather='twitter' class='footer-socialmedia-icon'></span></li>
					</ul>
				</div>
			</div>
			<div class='btn-see-more'>
				<a>Scroll down</a>
				<div></div>
			</div>
		</div>
		<div class='section-wrapper'>
			<h2 class='section-title'>INTRODUCTION</h2>
			<div class='section-title-seperator'></div>
			<div class='section-container'>
				<div class='section-image-wrapper'>
					<div class='border-left'></div>
					<div class='border-right'></div>
					<div class='section-image-container'></div>
				</div>
				<div class='section-desc-wrapper'>
					<h3>ABOUT ME</h3>
					<div id='about-me' class='section-desc-container'><p></p></div>
					<a href='#' class='btn-mywork'>
						<div class='bg'></div>
						<div class='text'>GET IN TOUCH</div>
					</a>
				</div>
			</div>
		</div>
		<button class='btn-go-up'>
			<span data-feather='chevron-up'></span>
		</button>
		{% include 'base/footer.html' %}
		
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
		<script>
			$('.btn-go-up').css('top', `calc(${window.innerHeight}px - 3em - 20px)`)
			$('.top-wrapper').css('height', window.innerHeight+'px')
			function htmlToElem(html) {
				let temp = document.createElement('template');
				html = html.trim();
				temp.innerHTML = html;
				return temp.content.firstChild;
			}
			function typing_effect(container, text, speed) {
				var text = text.split(/(<.*?>.*?<\/.*?>)|(<br\/>)/)
				var container = document.querySelector(container);
				var counter = 0
				console.log(text)
				for (var i = 0; i < text.length; i++) {
					if (!(text[i]||'').match(/(<.*?>.*?<\/.*?>)|(<br\/>)/)) {
						for (var j = 0; j < (text[i]||'').length; j++) {
							setTimeout(function(t){
								container.innerHTML += t==' '?'&nbsp;':t;
							}, counter, text[i][j])
							counter+=speed;
						}
					} else {
						var element = htmlToElem(text[i]);
						var content = element.innerText
						element.innerText = ''

						setTimeout(function(e){
							container.innerHTML += e.outerHTML;
						}, counter, element)
						counter+=speed;

						for (var j = 0; j < content.length; j++) {
							setTimeout(function(t){
								container.querySelector(element.tagName.toLowerCase()+':last-child').innerHTML += t==' '?'&nbsp;':t;
							}, counter, content[j])
							counter+=speed;
						}
					}
				}
			}
			$(document).ready(function(){
				var scrollbar = Scrollbar.init($('#t')[0])
				$('body').addClass('loaded')
				if(!navigator.userAgent.toLowerCase().includes('mobile')) {
					scrollbar = Scrollbar.init($('body')[0], {
						syncCallbacks: true,
						damping: 0.05
					})
					$('.btn-see-more').click(function(){
						scrollbar.scrollIntoView(document.querySelector('.section-wrapper'), {
							offsetTop: -60
						})
					})
				} else {
					$('body, html').css({height: 'auto', overflow: 'scroll'})
					$('.btn-see-more').click(function(){
						document.querySelector('.section-wrapper').scrollIntoView()
					})
				}
				
				function onScrollCallback(offset){
					var page_top = scrollbar.scrollTop;
					if (page_top > 300) {
						$('.go-up').css('opacity', 1)
					} else {
						$('.go-up').css('opacity', 0)
					}
					$('.cb-nav').css('top', offset.y + 'px')
					$('.btn-go-up').css('top', `calc(${offset.y + 'px'} + ${window.innerHeight}px - 3em - 20px)`)
				}
				scrollbar.addListener(onScrollCallback)
				window.addEventListener('scroll', onScrollCallback)

				$('.btn-see-more').click(function(){
					window.scrollIntoView(document.querySelector('.section-wrapper'))
					scrollbar.scrollIntoView(document.querySelector('.section-wrapper'), {
						offsetTop: -60
					})
				})
				feather.replace()

				new Typed('.title-text', {
					strings: ['Melvin Chia', 'The Silly Coder', 'Web Developer', 'Data Scraper'],
					typeSpeed: 40,
					loop: true,
					backSpeed: 40,
					backDelay: 1200,
					cursorChar: '_',
					startDelay: 1000,
				});
				new typing_effect('#about-me p', `Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Velit sed ullamcorper morbi tincidunt. Ultrices neque ornare aenean euismod elementum nisi quis. At tempor commodo ullamcorper a lacus vestibulum sed arcu. A diam maecenas sed enim ut sem <span class='highlight'>viverra</span> aliquet.
				<br/><br/>
				Cursus eget nunc scelerisque viverra mauris in aliquam sem fringilla. Congue mauris rhoncus aenean vel. <span class='highlight'>Consequat ac</span> felis donec et odio pellentesque diam volutpat. Sit amet aliquam id diam maecenas ultricies mi eget. Id leo in vitae turpis massa sed elementum tempus.`,
				10
				);
			});

			$('.btn-mywork').hover(function(){
				$('.btn-mywork .bg').css('animation', 'see-work-slideIn 0.5s cubic-bezier( 0.16, 0.61, 0.08, 1 ) 0s normal forwards')
			}, function(){
				$('.btn-mywork .bg').css('animation', 'see-work-slideOut 0.5s cubic-bezier( 0.16, 0.61, 0.08, 1 ) 0s normal forwards')
			})
		</script>
	</body>
</html>
